<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Recruitment Admin Security Panel</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Inter -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <style>
      /* Set font family */
      body {
        font-family: 'Inter', sans-serif;
      }

      /* Card hover effect */
      .card:hover {
        transform: translateY(-4px);
        transition: all 0.3s ease-in-out;
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.08);
      }

      /* Modal animation */
      #modal {
        animation: fadeIn 0.3s ease-out;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: scale(0.95);
        }

        to {
          opacity: 1;
          transform: scale(1);
        }
      }

      .animate-fadeIn {
        animation: fadeIn 0.3s ease-out;
      }
    </style>
    <script>
      // Tailwind custom theme extension
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: '#2563eb',
              danger: '#dc2626',
              muted: '#6b7280',
              background: '#f9fafb'
            }
          }
        }
      }
    </script>
  </head>

  <body class="bg-background text-black min-h-screen">
    <div class="max-w-7xl mx-auto p-6">
      <!-- Header Section -->
      <div class="flex justify-between items-center mb-8">
        <div>
          <h1 class="text-3xl font-semibold">Security Setting</h1>
          <p class="text-muted text-gray-500">
            Control and monitor recruitment process security.
          </p>
        </div>
        <div class="flex gap-2">
          <!-- Home Button -->
          <a
            href="40-Admin Panel Home.html"
            class="bg-primary text-white px-5 py-2 rounded hover:bg-blue-700 flex items-center gap-2 text-sm font-medium transition duration-200"
          >
            üè† Home
          </a>
          <!-- Add New Policy Button -->
          <button
            onclick="openModal('Add New Policy')"
            class="bg-primary text-white px-5 py-2 rounded hover:bg-blue-700 flex items-center gap-2 text-sm font-medium transition duration-200"
          >
            + Add New Policy
          </button>
        </div>
      </div>

      <!-- Security Policies Cards Grid -->
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        <!-- Password Policy Card -->
        <div
          class="bg-white border border-gray-200 rounded-2xl p-6 shadow card cursor-pointer flex flex-col justify-between"
          onclick="openModal('Password Policy')"
        >
          <div>
            <h2 class="text-xl font-semibold mb-3">Password Policy</h2>
            <ul class="text-sm mb-5 text-gray-600 space-y-1">
              <li>Min length: <strong class="font-medium">8 chars</strong></li>
              <li>Require numbers: <strong class="font-medium">Yes</strong></li>
              <li>
                Require special chars: <strong class="font-medium">Yes</strong>
              </li>
            </ul>
          </div>
          <button
            class="bg-primary text-white px-4 py-2 rounded hover:bg-blue-700 transition duration-200 self-start"
          >
            ‚úèÔ∏è Edit
          </button>
        </div>

        <!-- Two-Factor Authentication Card -->
        <div
          class="bg-white border border-gray-200 rounded-2xl p-6 shadow card cursor-pointer flex flex-col justify-between"
          onclick="openModal('Two-Factor Authentication')"
        >
          <div>
            <h2 class="text-xl font-semibold mb-3">
              Two-Factor Authentication
            </h2>
            <p class="text-sm text-gray-600 mb-4">
              Enable 2FA for recruitment panel users
            </p>
          </div>
          <button
            class="bg-primary text-white px-4 py-2 rounded hover:bg-blue-700 transition duration-200 self-start"
          >
            üîê Configure
          </button>
        </div>

        <!-- Session Management Card -->
        <div
          class="bg-white border border-gray-200 rounded-2xl p-6 shadow card cursor-pointer flex flex-col justify-between"
          onclick="openModal('Session Management')"
        >
          <div>
            <h2 class="text-xl font-semibold mb-3">Session Management</h2>
            <ul class="text-sm mb-5 text-gray-600 space-y-1">
              <li>Timeout: <strong class="font-medium">30 min</strong></li>
              <li>
                Max concurrent sessions: <strong class="font-medium">2</strong>
              </li>
            </ul>
          </div>
          <button
            class="bg-primary text-white px-4 py-2 rounded hover:bg-blue-700 transition duration-200 self-start"
          >
            ‚öôÔ∏è Modify
          </button>
        </div>

        <!-- IP Restrictions Card -->
        <div
          class="bg-white border border-gray-200 rounded-2xl p-6 shadow card cursor-pointer flex flex-col justify-between"
          onclick="openModal('IP Restrictions')"
        >
          <div>
            <h2 class="text-xl font-semibold mb-3">IP Restrictions</h2>
            <p class="text-sm text-gray-600 mb-3">
              Allowed IP ranges for recruiters
            </p>
            <ul class="text-sm mb-5 text-gray-600 space-y-1">
              <li>
                192.168.1.0/24
                <button class="text-danger hover:text-red-700 ml-3">üóë</button>
              </li>
              <li>
                10.0.0.0/8
                <button class="text-danger hover:text-red-700 ml-3">üóë</button>
              </li>
            </ul>
          </div>
          <button
            class="bg-primary text-white px-4 py-2 rounded hover:bg-blue-700 transition duration-200 self-start"
          >
            ‚ûï Add
          </button>
        </div>

        <!-- OTP Verification Card -->
        <div
          class="bg-white border border-gray-200 rounded-2xl p-6 shadow card cursor-pointer flex flex-col justify-between"
          onclick="openModal('OTP Verification')"
        >
          <div>
            <h2 class="text-xl font-semibold mb-3">OTP Verification</h2>
            <p class="text-sm text-gray-600 mb-5">
              Verify important actions with OTP
            </p>
          </div>
          <button
            class="bg-primary text-white px-4 py-2 rounded hover:bg-blue-700 transition duration-200 self-start"
          >
            üîë Manage
          </button>
        </div>

        <!-- Encryption Key Rotation Card -->
        <div
          class="bg-white border border-gray-200 rounded-2xl p-6 shadow card cursor-pointer flex flex-col justify-between"
          onclick="openModal('Encryption Key Rotation')"
        >
          <div>
            <h2 class="text-xl font-semibold mb-3">Encryption Key Rotation</h2>
            <p class="text-sm text-gray-600 mb-5">
              Rotate keys for data protection
            </p>
          </div>
          <button
            class="bg-primary text-white px-4 py-2 rounded hover:bg-blue-700 transition duration-200 self-start"
          >
            üîÑ Rotate
          </button>
        </div>

        <!-- Access Expiry Dates Card -->
        <div
          class="bg-white border border-gray-200 rounded-2xl p-6 shadow card cursor-pointer flex flex-col justify-between"
          onclick="openModal('Access Expiry Dates')"
        >
          <div>
            <h2 class="text-xl font-semibold mb-3">Access Expiry Dates</h2>
            <p class="text-sm text-gray-600 mb-5">
              Temporary access expiration
            </p>
          </div>
          <button
            class="bg-primary text-white px-4 py-2 rounded hover:bg-blue-700 transition duration-200 self-start"
          >
            üìÖ Set Expiry
          </button>
        </div>

        <!-- User Behavior Heatmap Card -->
        <div
          class="bg-white border border-gray-200 rounded-2xl p-6 shadow card cursor-pointer flex flex-col justify-between"
          onclick="openModal('User Behavior Heatmap')"
        >
          <div>
            <h2 class="text-xl font-semibold mb-3">User Behavior Heatmap</h2>
            <p class="text-sm text-gray-600 mb-5">
              Track login and actions patterns
            </p>
          </div>
          <button
            class="bg-primary text-white px-4 py-2 rounded hover:bg-blue-700 transition duration-200 self-start"
          >
            üìä View
          </button>
        </div>
      </div>

      <!-- Security Audit Log Table -->
      <div class="mt-12 bg-white border border-gray-200 rounded-2xl p-6 shadow">
        <h2 class="text-2xl font-semibold mb-4">Security Audit Log</h2>
        <p class="text-sm text-gray-600 mb-6">Recent security activities</p>
        <div class="overflow-auto max-h-72">
          <table class="w-full text-sm border-collapse">
            <thead>
              <tr class="bg-background text-muted text-gray-500">
                <th class="p-3 border">Time</th>
                <th class="p-3 border">Action</th>
                <th class="p-3 border">User</th>
                <th class="p-3 border">IP Address</th>
              </tr>
            </thead>
            <tbody>
              <!-- Example log entries -->
              <tr class="hover:bg-gray-50">
                <td class="p-3 border">2025-01-15 14:30</td>
                <td class="p-3 border">Password policy updated</td>
                <td class="p-3 border">admin@example.com</td>
                <td class="p-3 border">192.168.1.100</td>
              </tr>
              <tr class="hover:bg-gray-50">
                <td class="p-3 border">2025-01-15 13:45</td>
                <td class="p-3 border">2FA enabled</td>
                <td class="p-3 border">john.doe@example.com</td>
                <td class="p-3 border">192.168.1.101</td>
              </tr>
              <tr class="hover:bg-gray-50">
                <td class="p-3 border">2025-01-15 12:15</td>
                <td class="p-3 border">IP range added</td>
                <td class="p-3 border">admin@example.com</td>
                <td class="p-3 border">192.168.1.100</td>
              </tr>
              <tr class="hover:bg-gray-50">
                <td class="p-3 border">2025-01-14 20:00</td>
                <td class="p-3 border">Session timeout modified</td>
                <td class="p-3 border">security@example.com</td>
                <td class="p-3 border">192.168.1.110</td>
              </tr>
              <tr class="hover:bg-gray-50">
                <td class="p-3 border">2025-01-14 18:20</td>
                <td class="p-3 border">Access expiry set</td>
                <td class="p-3 border">manager@example.com</td>
                <td class="p-3 border">10.0.0.5</td>
              </tr>
              <tr class="hover:bg-gray-50">
                <td class="p-3 border">2025-01-14 10:00</td>
                <td class="p-3 border">Failed login attempt</td>
                <td class="p-3 border">attacker@example.com</td>
                <td class="p-3 border">203.0.113.45</td>
              </tr>
              <tr class="hover:bg-gray-50">
                <td class="p-3 border">2025-01-13 15:30</td>
                <td class="p-3 border">Encryption key rotated</td>
                <td class="p-3 border">admin@example.com</td>
                <td class="p-3 border">192.168.1.100</td>
              </tr>
              <tr class="hover:bg-gray-50">
                <td class="p-3 border">2025-01-13 09:00</td>
                <td class="p-3 border">User behavior heatmap viewed</td>
                <td class="p-3 border">analyst@example.com</td>
                <td class="p-3 border">10.0.0.10</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- Modal for Editing/Adding Policies -->
    <div
      id="modal"
      class="fixed inset-0 bg-black bg-opacity-40 hidden items-center justify-center z-50"
    >
      <div
        class="bg-white p-6 rounded-2xl shadow-2xl max-w-lg w-full animate-fadeIn space-y-4 max-h-[90vh] overflow-auto"
      >
        <h3 id="modal-title" class="text-2xl font-semibold text-primary mb-4">
          Policy
        </h3>

        <form id="modal-form" class="space-y-4">
          <!-- Dynamic fields inserted here -->
        </form>

        <div class="flex justify-end gap-2 pt-4">
          <button
            type="button"
            onclick="closeModal()"
            class="border text-muted px-4 py-2 rounded hover:bg-gray-100"
          >
            Cancel
          </button>
          <button
            type="submit"
            form="modal-form"
            class="bg-primary text-white px-4 py-2 rounded hover:bg-blue-700 transition"
          >
            üíæ Save
          </button>
        </div>
      </div>
    </div>

    <script>
      // Modal DOM elements
      const modal = document.getElementById('modal')
      const modalTitle = document.getElementById('modal-title')
      const modalForm = document.getElementById('modal-form')

      // Templates for each policy form
      const formTemplates = {
        'Password Policy': `
        <label class="block">
          <span class="text-sm font-medium">Minimum Length</span>
          <input type="number" min="6" max="64" name="minLength" required class="w-full border rounded px-3 py-2 mt-1" placeholder="8" />
        </label>
        <label class="block">
          <span class="text-sm font-medium">Require Numbers</span>
          <select name="requireNumbers" class="w-full border rounded px-3 py-2 mt-1" required>
            <option value="yes">Yes</option>
            <option value="no">No</option>
          </select>
        </label>
        <label class="block">
          <span class="text-sm font-medium">Require Special Characters</span>
          <select name="requireSpecial" class="w-full border rounded px-3 py-2 mt-1" required>
            <option value="yes">Yes</option>
            <option value="no">No</option>
          </select>
        </label>
      `,

        'Two-Factor Authentication': `
        <label class="flex items-center space-x-3 mt-2">
          <input type="checkbox" name="enable2FA" class="form-checkbox h-5 w-5 text-primary" />
          <span class="text-sm">Enable Two-Factor Authentication</span>
        </label>
        <label class="block mt-4">
          <span class="text-sm font-medium">Methods</span>
          <select name="methods2FA" multiple class="w-full border rounded px-3 py-2 mt-1" size="3" >
            <option value="sms">SMS</option>
            <option value="email">Email</option>
            <option value="authenticator_app">Authenticator App</option>
          </select>
          <p class="text-xs text-gray-500 mt-1">Use Ctrl/Cmd to select multiple</p>
        </label>
      `,

        'Session Management': `
        <label class="block">
          <span class="text-sm font-medium">Session Timeout (minutes)</span>
          <input type="number" min="5" max="240" name="sessionTimeout" required class="w-full border rounded px-3 py-2 mt-1" placeholder="30" />
        </label>
        <label class="block">
          <span class="text-sm font-medium">Max Concurrent Sessions</span>
          <input type="number" min="1" max="10" name="maxSessions" required class="w-full border rounded px-3 py-2 mt-1" placeholder="2" />
        </label>
      `,

        'IP Restrictions': `
        <label class="block">
          <span class="text-sm font-medium">Allowed IP Ranges (comma separated)</span>
          <textarea name="ipRanges" rows="3" class="w-full border rounded px-3 py-2 mt-1" placeholder="192.168.1.0/24, 10.0.0.0/8"></textarea>
        </label>
      `,

        'OTP Verification': `
        <label class="flex items-center space-x-3 mt-2">
          <input type="checkbox" name="enableOTP" class="form-checkbox h-5 w-5 text-primary" />
          <span class="text-sm">Enable OTP Verification</span>
        </label>
        <label class="block mt-4">
          <span class="text-sm font-medium">OTP Expiry (seconds)</span>
          <input type="number" min="30" max="300" name="otpExpiry" required class="w-full border rounded px-3 py-2 mt-1" placeholder="120" />
        </label>
      `,

        'Encryption Key Rotation': `
        <label class="block">
          <span class="text-sm font-medium">Last Rotation Date</span>
          <input type="date" name="lastRotationDate" class="w-full border rounded px-3 py-2 mt-1" />
        </label>
        <button type="button" onclick="alert('Key rotation started!')" class="bg-primary mt-4 px-4 py-2 rounded text-white hover:bg-blue-700 transition">üîÑ Rotate Keys Now</button>
      `,

        'Access Expiry Dates': `
        <label class="block">
          <span class="text-sm font-medium">User Email</span>
          <input type="email" name="userEmail" required class="w-full border rounded px-3 py-2 mt-1" placeholder="user@example.com" />
        </label>
        <label class="block mt-4">
          <span class="text-sm font-medium">Access Expiry Date</span>
          <input type="date" name="expiryDate" required class="w-full border rounded px-3 py-2 mt-1" />
        </label>
      `,

        'User Behavior Heatmap': `
        <label class="block">
          <span class="text-sm font-medium">Start Date</span>
          <input type="date" name="startDate" required class="w-full border rounded px-3 py-2 mt-1" />
        </label>
        <label class="block mt-4">
          <span class="text-sm font-medium">End Date</span>
          <input type="date" name="endDate" required class="w-full border rounded px-3 py-2 mt-1" />
        </label>
      `
      }

      // Open modal and load form for selected policy
      function openModal(policyName) {
        modalTitle.textContent = policyName
        modalForm.innerHTML =
          formTemplates[policyName] ||
          `<p class="text-gray-500">No form available for ${policyName}.</p>`
        modal.classList.remove('hidden')
        modal.classList.add('flex')
      }

      // Close modal and reset form
      function closeModal() {
        modal.classList.add('hidden')
        modal.classList.remove('flex')
        modalForm.reset?.() // reset form if possible
      }

      // Handle form submission for modal
      modalForm.addEventListener('submit', e => {
        e.preventDefault()

        const formData = new FormData(modalForm)
        let dataObj = {}
        for (const [key, value] of formData.entries()) {
          dataObj[key] = value
        }
        // Include unchecked checkboxes manually
        modalForm.querySelectorAll('input[type=checkbox]').forEach(cb => {
          if (!formData.has(cb.name)) {
            dataObj[cb.name] = false
          } else {
            dataObj[cb.name] = true
          }
        })

        console.log('Form Data for', modalTitle.textContent, dataObj)
        alert(
          `Settings for "${modalTitle.textContent}" saved! Check console for details.`
        )

        closeModal()
      })

      // Close modal on outside click
      window.onclick = function (event) {
        if (event.target === modal) {
          closeModal()
        }
      }
    </script>
  </body>
</html>
